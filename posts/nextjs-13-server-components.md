---
teaser: /Nextjs-ServerComponents/thumbnail.png
category: π’» κ°λ° μΌκΈ°
title: Next.js 13 Server Componentsκ°€ λ¬΄μ—‡μΌκΉ? 1νΈ
date: 2023-10-03T00:00:00+00:00
time: 21:34
description: Next.js 13λ²„μ „μ— μ¶”κ°€λ Server Componentsμ— κ΄€ν• μ΄μ•ΌκΈ°μ…λ‹λ‹¤.
---

![thumbnail](/Nextjs-ServerComponents/thumbnail.png)

μ‘λ…„μ— Nextjs 13 λ²„μ „μ΄ λ°ν‘λλ©΄μ„ μ•± λ””λ ‰ν† λ¦¬, μ„λ²„ μ»΄ν¬λ„νΈ, μ¤νΈλ¦¬λ° λ“±λ“± λ‹¤μ–‘ν•κ² λ³€ν™”λμ—μµλ‹λ‹¤. κ·Έμ¤‘μ—μ„ μ¤λμ€ Server Componentsμ— λ€ν•΄μ„ μ‘μ„±ν•΄λ³΄λ ¤κ³  ν•©λ‹λ‹¤.

## Server Componentsκ°€ λ­”κ°€μ”?

---

**Server Components**λ” λ§κ·Έλ€λ΅ μ„λ²„μ—μ„ λ λ”λ§μ΄ μ΄λ£¨μ–΄μ§€λ” μ»΄ν¬λ„νΈμ…λ‹λ‹¤.

- μ΄λ” λ€λ¶€λ¶„μ μ»΄ν¬λ„νΈκ°€ μ„λ²„μ—μ„ λ λ”λ§λκ³ , μ‘μ€ μΈν„°λ™ν‹°λΈ UI μ”μ†λ§ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ λ”λ§ λλ” λ°©μ‹μ…λ‹λ‹¤.

- μ΄ μ‘μ€ μΈν„°λ™ν‹°λΈ UIμ”μ†λ“¤μ„ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλΌκ³  μ§€μΉ­ν•  μ μμµλ‹λ‹¤.

- μ„λ²„ λ‹¨μ—μ„ λ λ”λ§ λλ―€λ΅, μ•„λμ™€ κ°™μ€ λΈλΌμ°μ € ν™κ²½μ μ½”λ“λ” μ‚¬μ© λ¶κ°€ν•©λ‹λ‹¤.
  - Event Listener(onClick λ“±) μ‚¬μ© λ¶κ°€
  - React Hooks(useState λ“±) μ‚¬μ© λ¶κ°€
  - Browser API(webStorage λ“±) μ‚¬μ© λ¶κ°€

**Client Components**λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ λ λ”λ§λλ” μ»΄ν¬λ„νΈμ…λ‹λ‹¤.

- μ΄ μ»΄ν¬λ„νΈλ” μ‚¬μ©μμ™€ μƒνΈμ‘μ©μ„ ν•λ©°, μ• ν”λ¦¬μΌ€μ΄μ…μ μΈν„°λ ‰ν‹°λΈλ¥Ό λ‹΄λ‹Ήν•©λ‹λ‹¤.

- ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” next.js κ°™μ€ ν”„λ μ„μ›ν¬μ—μ„μ μ„λ²„μ—μ„ λ―Έλ¦¬ λ λ”λ§μ„ ν•κ³  ν΄λΌμ΄μ–ΈνΈμ—μ„λ” **\*Hydrate**λμ–΄ μ΄κΈ° λ λ”λ§ μ„±λ¥μ„ κ°μ„ ν•  μ μμµλ‹λ‹¤.

> **\*Hydrate** : Server Side λ‹¨μ—μ„ λ λ”λ§ λ μ •μ  νμ΄μ§€μ™€ λ²λ“¤λ§λ JSνμΌμ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Έ λ’¤, ν΄λΌμ΄μ–ΈνΈ λ‹¨μ—μ„ HTML μ½”λ“μ™€ ReactμΈ JSμ½”λ“λ¥Ό μ„λ΅ λ§¤μΉ­ μ‹ν‚¤λ” κ³Όμ •μ„ λ§ν•©λ‹λ‹¤.

![ServerAndClientCompinents](/Nextjs-ServerComponents/ServerAndClientCompinents.png)
_next.js κ³µμ‹λ¬Έμ„_

μ €λ” μ΄ λ¶€λ¶„μ΄ ν—·κ°λ Έμµλ‹λ‹¤(μ§€κΈλ„ μ—¬μ „ν ν—·κ°λ¦½λ‹λ‹¤γ…‹γ…‹γ…‹γ…‹)

## μ„λ²„ μ»΄ν¬λ„νΈλ‘ SSR(Server Side Rendering)μ΄λ‘ λ¬΄μ¨ μ°¨μ΄μ§€?

---

μ„λ²„μ—μ„ λ λ”λ§μ„ ν•λ‹¤λ” κ²ƒμ΄ μ μ‚¬ν•λ‹¤λ” μ μ—μ„ μ„λ²„ μ»΄ν¬λ„νΈμ™€ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ΄ ν—·κ°λ Έμµλ‹λ‹¤. ν•μ§€λ§ λ”°μ§€κ³  λ³΄λ‹ ν•΄κ²°ν•κ³ μ ν•λ” λ¬Έμ μ μ΄ λ‹¤λ¥Έκ±° κ°™μ•μµλ‹λ‹¤.

- μ„λ²„ μ»΄ν¬λ„νΈμ—μ„μ λ λ”λ§λ μ½”λ“λ” ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λμ§€ μ•μµλ‹λ‹¤. λ°λ©΄μ— μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)μ λ¨λ“  μ»΄ν¬λ„νΈμ μ½”λ“λ” μλ°”μ¤ν¬λ¦½νΈ λ²λ“¤μ— ν¬ν•¨λμ–΄ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅λ©λ‹λ‹¤.

- μ„λ²„ μ»΄ν¬λ„νΈλ” νμ΄μ§€ λ λ²¨μ— μƒκ΄€μ—†μ΄ λ¨λ“  μ»΄ν¬λ„νΈμ—μ„ μ„λ²„μ— μ ‘κ·Ό κ°€λ¥ν•©λ‹λ‹¤. ν•μ§€λ§ Next.jsμ κ²½μ° κ°€μ¥ top levelμ νμ΄μ§€μ—μ„λ§ `getServerProps()`λ‚ `getInitialProps()`λ΅ μ„λ²„μ— μ ‘κ·Ό κ°€λ¥ν•©λ‹λ‹¤. ( `getServerProps()`, `getInitialProps()`λ” μ•„μ§ μ κ°€ next.jsλ¥Ό μ…λ¬Έν•μ§€ μ–Όλ§ μ•λμ–΄ μ¨λ³΄μ§€λ¥Ό λ»ν–μ§€λ§ μΌλ‹¨ λ‚μ¤‘μ— κ°λ… ν™•μΈ κ²Έ μ¬λ ¤λ³΄λ„λ΅ ν•κ² μµλ‹λ‹¤.)

- μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈ μƒνƒλ¥Ό μ μ§€ν•λ©° refetch λ μ μμµλ‹λ‹¤. μ„λ²„ μ»΄ν¬λ„νΈλ” HTMLμ΄ μ•„λ‹ νΉλ³„ν• ν•νƒλ΅ μ»΄ν¬λ„νΈλ¥Ό μ „λ‹¬ν•κΈ° λ•λ¬Έμ— ν•„μ”ν• κ²½μ° ν¬μ»¤μ¤, μΈν’‹ μ…λ ¥κ°’ κ°™μ€ ν΄λΌμ΄μ–ΈνΈ μƒνƒλ¥Ό μ μ§€ν•λ©° μ—¬λ¬ λ² λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤κ³  λ¦¬λ λ”λ§ν•μ—¬ μ „λ‹¬ν•  μ μλ‹¤. ν•μ§€λ§ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)μ κ²½μ° HTMLλ΅ μ „λ‹¬λκΈ° λ•λ¬Έμ— μƒλ΅μ΄ refetchκ°€ ν•„μ”ν• κ²½μ° HTML μ „μ²΄λ¥Ό λ¦¬λ λ”λ§ ν•΄μ•Ό ν•λ©° μ΄λ΅ μΈν•΄ ν΄λΌλ¦¬μ–ΈνΈ μƒνƒλ¥Ό μ μ§€ν•  μ μ—†μµλ‹λ‹¤.

## κ·ΈλΌ Client Componentsλ”?

---

### μ§€μ‹μ–΄κ°€ μλ‹¤λ”κ² κ·Έκ² λ­κΉ?

μ•„λλ” μ  λΈ”λ΅κ·Έ μ½”λ“ μ¤‘ κ²μ‹λ¬Ό λ²„νΌ κµ¬ν„ν•λ” μ½”λ“ μ¤‘ μΌλ¶€μ…λ‹λ‹¤.

```typescript
"use client" <= λ°”λ΅ μ΄ λ¶€λ¶„

import styled from "@emotion/styled";
import { useState } from "react";

...Emotion μ½”λ“ μƒλµ...

const CopiedUrl = () => {
    const [copied, setCopied] = useState(false);

    const copyUrlToClipboard = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {
        event.stopPropagation();
        const fullUrl = window.location.href;
        navigator.clipboard.writeText(fullUrl);
        setCopied(true);
        setTimeout(() => setCopied(false), 2000);
    };

    return (
        <StyledCopyURL onClick={copyUrlToClipboard} copied={copied}>
            {copied ?
                (
                    <>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path d="M8.465 11.293c1.133-1.133 3.109-1.133 4.242 0l.707.707 1.414-1.414-.707-.707c-.943-.944-2.199-1.465-3.535-1.465s-2.592.521-3.535 1.465L4.929 12a5.008 5.008 0 0 0 0 7.071 4.983 4.983 0 0 0 3.535 1.462A4.982 4.982 0 0 0 12 19.071l.707-.707-1.414-1.414-.707.707a3.007 3.007 0 0 1-4.243 0 3.005 3.005 0 0 1 0-4.243l2.122-2.121z"></path>
                            <path d="m12 4.929-.707.707 1.414 1.414.707-.707a3.007 3.007 0 0 1 4.243 0 3.005 3.005 0 0 1 0 4.243l-2.122 2.121c-1.133 1.133-3.109 1.133-4.242 0L10.586 12l-1.414 1.414.707.707c.943.944 2.199 1.465 3.535 1.465s2.592-.521 3.535-1.465L19.071 12a5.008 5.008 0 0 0 0-7.071 5.006 5.006 0 0 0-7.071 0z"></path>
                        </svg>
                        <span>κ²μ‹λ¬Ό λ§ν¬ λ³µμ‚¬μ™„λ£!</span>
                    </>
                )
                : (
                    <>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path d="M8.465 11.293c1.133-1.133 3.109-1.133 4.242 0l.707.707 1.414-1.414-.707-.707c-.943-.944-2.199-1.465-3.535-1.465s-2.592.521-3.535 1.465L4.929 12a5.008 5.008 0 0 0 0 7.071 4.983 4.983 0 0 0 3.535 1.462A4.982 4.982 0 0 0 12 19.071l.707-.707-1.414-1.414-.707.707a3.007 3.007 0 0 1-4.243 0 3.005 3.005 0 0 1 0-4.243l2.122-2.121z"></path>
                            <path d="m12 4.929-.707.707 1.414 1.414.707-.707a3.007 3.007 0 0 1 4.243 0 3.005 3.005 0 0 1 0 4.243l-2.122 2.121c-1.133 1.133-3.109 1.133-4.242 0L10.586 12l-1.414 1.414.707.707c.943.944 2.199 1.465 3.535 1.465s2.592-.521 3.535-1.465L19.071 12a5.008 5.008 0 0 0 0-7.071 5.006 5.006 0 0 0-7.071 0z"></path>
                        </svg>
                        <span>κ²μ‹λ¬Ό κ³µμ ν•κΈ°</span>
                    </>
                )}
        </StyledCopyURL>
    );
}

export default CopiedUrl;
```

![useClient](/Nextjs-ServerComponents/useClient.png)

μ•„λμ— μ‚¬μ§„μ—μ„λ” `'use client'` μ§€μ‹μ–΄κ°€ μ„λ²„ μ „μ© μ½”λ“μ™€ ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μ‚¬μ΄μ— μλ”λ° μ΄ μ§€μ‹μ–΄κ°€ νμΌμ— μ •μλλ©΄ μμ‹ κµ¬μ„± μ”μ†λ¥Ό ν¬ν•¨ν•μ—¬ νμΌλ΅ κ°€μ Έμ¨ λ‹¤λ¥Έ λ¨λ“  λ¨λ“μ€ ν΄λΌμ΄μ–ΈνΈ λ²λ“¤μ μΌλ¶€λ΅ κ°„μ£Όλ©λ‹λ‹¤.

μ¦‰, nest.js 13λ¶€ν„°λ” μ„λ²„ μ»΄ν¬λ„νΈκ°€ κΈ°λ³Έκ°’μ΄λ―€λ΅ `use client` μ§€μ‹λ¬Έμ„ λ¨λ“μ μ‹μ‘λ¶€λ¶„μ— μ •μν•κ±°λ‚ κ°€μ Έμ¤μ§€ μ•λ” ν• λ¨λ“  μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈ λ¨λ“ κ·Έλν”„μ μΌλ¶€μ΄κ² λ©λ‹λ‹¤.

κ·Έλμ„ κ·Έ μ„μ— μλ” μ  μ½”λ“λ¥Ό λ³΄μ‹λ©΄ λ§¨ μ— μ¤„μ— 'use client' μ§€μ‹μ–΄κ°€ μλ” κ²ƒμ„ ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤.

---

**μ£Όμ:
λ¨λ“  νμΌμ—μ„ "use client" μ§€μ‹λ¬Έμ„ μ •μν•  ν•„μ”λ” μ—†λ‹¤. ν΄λΌμ΄μ–ΈνΈ λ¨λ“ κ²½κ³„λ” "μ§„μ…μ "μ—μ„ ν• λ²λ§ μ •μν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ κ°„μ£Όλλ” λ¨λ“  λ¨λ“μ„ κ°€μ Έμ¬ μ μλ‹¤.**

---

> TMI: μ›λ `use client` μ§€μ‹μ–΄λ¥Ό μ‚¬μ©μ•ν•κ³  μ„λ²„ μ»΄ν¬λ„νΈλ” νμΌλ….server.js, ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” νμΌλ….client.jsμ€μΌλ‚ κ°λ°μ λ¶„λ“¤μ΄ μ¤λ νμν•κ³  ν”Όλ“λ°± λ°›μ€ λμ— `use client`λΌλ” μ§€μ‹μ–΄λ¥Ό μ“°κΈ°λ΅ ν–λ‹µλ‹λ‹¤. <a href="https://github.com/reactjs/server-components-demo/pull/62">κ΄€λ ¨ μλ£</a>

λ’·λ‚΄μ©μ€ 2νΈμ—μ„ μ§„ν–‰ν•κ² μµλ‹λ‹¤.
